<div class="main-content">
  <div data-controller="reset">
    <%# J'affiche ma partial search-bar %>
    <%= render "search-bar" %>
    <%# Je gère l'affichage des résultats %>
    <%# Si la valeur "query" dans params est présente %>
    <% if params[:query].present? %>
      <%# Je créé une div qui affichera mes résultats %>
      <div data-reset-target="list">
        <%# Si je trouve des restaurants dans les résultats de ma recherche %>
        <% if @restaurants.any? %>
            <%# Alors je fais une itération sur "@restaurants" %>
            <% @restaurants.each do |restaurant| %>
              <%# Et pour chaque "restaurant", j'affiche les infos (name et address), la possibilité de l'ajouter à une collection via l'icon %>
              <%# et le lien cers la show du restaurant %>
              <p><%= link_to restaurant.name, restaurant_path(restaurant) %><i class="fa-solid fa-bookmark"></i></p>
            <% end %>
        <%# Sinon %>
        <% else %>
          <%# On affiche le message suivant %>
          <p>Sorry, no restaurant found.</p>
        <% end %>
      </div>
    <% end %>
  </div>

  <h1>Favorites</h1>
  <%# Création d'une div afin d'afficher la collection "Favorites" %>
  <div class="card-container">
    <% @saved_restaurants.each do |saved_restaurant| %>
      <div class="card">
         <%= image_tag saved_restaurant.restaurant.images.first, class: "card-img-top" if saved_restaurant.restaurant.images.attached? %>
          <div class="card-body">
            <h5 class="card-title"><%= saved_restaurant.restaurant.name %></h5>
            <p class="card-text"><%= saved_restaurant.restaurant.address %></p>
            <p class="card-text">Rating: <%= saved_restaurant.restaurant.rating %></p>
            <a href="<%= restaurant_path(saved_restaurant.restaurant) %>" class="btn btn-primary">View Restaurant</a>
          </div>
      </div>
    <% end %>
  <h1>Recommended</h1>
</div>
